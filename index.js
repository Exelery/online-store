!function(){"use strict";var t={807:function(t,e,n){var o=n(81),r=n.n(o),i=n(645),a=n.n(i)()(r());a.push([t.id,'.item__text span,.footer__link,body{font-family:"Roboto",sans-serif;font-weight:400}.item__text,.item__price,.header__total,.header__cart{font-family:"Roboto",sans-serif;font-weight:500}.footer__year,.header__total--label,.header__cart--label,.header__title{font-family:"Roboto",sans-serif;font-weight:700}html{box-sizing:border-box}*,*::after,*::before{box-sizing:inherit}ul,ol{padding:0}body,h1,h2,h3,h4,h5,h6,p,ul,ol,li,figure,figcaption,blockquote,dl,dd{margin:0}ul{list-style:none}img{display:block}input,button,textarea,select{font:inherit}a{text-decoration:none;color:inherit}address{font-style:normal}body{font-size:16px;line-height:1.4;background-color:#f6f6f6}.body.menu-active{overflow:hidden}.main{min-height:86vh;width:100%;padding:20px 0}.wrapper{background-repeat:no-repeat;background-position:top center;background-size:cover}.container{max-width:1200px;width:100%;margin:0 auto;padding:0 20px;position:relative}@media only screen and (max-width: 1279px){.container{padding:0 30px}}@media only screen and (max-width: 767px){.container{padding:0 20px}}@media only screen and (max-width: 639px){.container{padding:0 10px}}.header{background-color:#005ff9;color:#fff}.header__inner{display:flex;align-items:center;justify-content:space-between;height:7vh}.header__title{padding:0 10px;border-radius:10px;cursor:pointer;transition:background-color .7s}.header__title:hover{background-color:#f91155;transition:background-color .7s}.header__title:hover span{background-color:#005ff9}.header__title span{display:inline-block;width:21px;height:25px;margin:0 3px;background-color:#f91155;border:5px solid #fff;border-radius:46%;transition:background-color .7s}.header__cart{cursor:pointer;transition:color .3s}.header__cart:hover{color:#f91155}.header__cart:hover .header__cart--label{background-color:#f91155}.header__cart--label{transition:background-color .3s}.header__total,.header__cart{font-size:20px;text-decoration:underline;text-decoration-color:#f91155;text-decoration-thickness:3px}.header__total--label,.header__cart--label{font-size:24px;display:inline-block;padding:0 5px;color:#fff;border:3px solid #f91155;border-radius:9px}.footer{background-color:#005ff9;color:#fff}.footer__inner{display:flex;align-items:center;justify-content:space-between;height:7vh}.footer__link{display:flex;align-items:center;padding:5px 10px;border-radius:10px;transition:background-color .5s}.footer__link:hover{background-color:#f91155}.footer__link:hover .footer__git{background-color:#005ff9}.footer__link.school{padding:0 5px;background-repeat:no-repeat;background-size:90%;background-position:center center;width:100px;height:52px}.footer__git{margin-right:5px;border-radius:50%;transition:background-color .5s}.products,.cart{width:100%}.products__inner,.cart__inner{display:flex;width:100%}.products__filter,.cart__filter{width:25%}.products__list,.cart__list{width:75%}.products__list,.products__filter,.cart__list,.cart__filter{margin:10px}.products__sort,.cart__sort{width:98%;margin:0 auto;display:flex;justify-content:space-between;align-items:center;padding:5px 10px;border-radius:8px;background-color:#fff;box-shadow:0 1px 2px 1px rgba(0,0,0,.16)}.products__find,.cart__find{font-weight:500;position:relative}.products__find::before,.cart__find::before{content:"";position:absolute;height:100%;width:70%;top:0;bottom:0;background-color:#fff;opacity:.5}.products__select,.products__select option,.cart__select,.cart__select option{cursor:pointer}.products__view-mode,.cart__view-mode{display:flex}.products__view-tile,.products__view-list,.cart__view-tile,.cart__view-list{position:relative;z-index:2;display:flex;flex-direction:column;cursor:pointer}.products__view-tile,.cart__view-tile{margin-right:4px;padding-left:12px}.products__view-tile span,.products__view-tile span::before,.products__view-list span,.cart__view-tile span,.cart__view-tile span::before,.cart__view-list span{pointer-events:none;height:10px;border:2px solid #333b41;border-radius:3px;transition:opacity .2s;position:relative;z-index:1}.products__view-tile span,.cart__view-tile span{display:inline-block;width:10px;margin:1px;position:relative;opacity:.5}.products__view-tile span::before,.cart__view-tile span::before{content:"";position:absolute;right:10px;top:-2px;width:10px;border-radius:3px}.products__view-list span,.cart__view-list span{display:inline-block;width:22px;margin:1px;opacity:.5}.products__view-tile.active-mode span,.products__view-list.active-mode span,.products__view-tile:hover span,.products__view-list:hover span,.cart__view-tile.active-mode span,.cart__view-list.active-mode span,.cart__view-tile:hover span,.cart__view-list:hover span{opacity:1}.products__items,.cart__items{padding:20px 0 0 0;width:100%;display:flex;justify-content:left;align-items:center;flex-wrap:wrap}.products__items.tile .item,.cart__items.tile .item{width:31%;aspect-ratio:1/1.4}.products__items.tile .item__info,.cart__items.tile .item__info{display:none}.products__items.list .item,.cart__items.list .item{padding-right:10px;width:100%;display:flex;justify-content:space-between;align-items:center;aspect-ratio:4/1;padding-bottom:0}.products__items.list .item__image-container,.cart__items.list .item__image-container{width:32%}.products.list .item__name,.cart.list .item__name{margin-bottom:10px}.item{margin:1.1%;background-color:#fff;box-shadow:0 1px 2px 1px rgba(0,0,0,.16);text-align:center;cursor:pointer;transition:box-shadow .3s;border-radius:8px;overflow:hidden}.item:hover{box-shadow:0 1px 2px 1px rgba(0,0,0,.46)}.item:hover .item__image{transform:scale(1.2)}.item__image-container{overflow:hidden;width:100%;aspect-ratio:1/1}.item__about{margin-right:auto;padding-left:10px}.item__name{margin:0 5px;font-size:20px;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.item__price{padding:0 5px}.item__name,.item__price,.item__add{margin:2px 0}.item__image{width:100%;height:100%;object-fit:cover;transition:transform .3s}.item__info{text-align:left}.item__add{width:fit-content;height:28px;text-transform:uppercase;cursor:pointer}.filters{padding:10px 5px 0;border:2px solid #005ff9;border-radius:8px;background-color:#fff;height:fit-content}.filters__control{display:flex;justify-content:space-around;align-items:center;padding:0 0 10px}.filters__block{width:100%;padding:5px;background-color:#ccc;margin-bottom:10px;border-radius:8px}.filters__name{text-align:center;border-bottom:1px solid #333b41}.filters__list{max-height:9.5vh;overflow-y:scroll;border-color:#333b41;border-style:solid;border-width:0 0 1px}.filters__item{display:flex}.filters__item>input{cursor:pointer}.filters__item span{display:inline-block;margin-left:auto;padding-right:5px}.filters__range{display:flex;justify-content:space-between;position:relative}.filters__range::before{content:"⟷";position:absolute;width:10px;height:10px;left:45%;top:20%}.filters__dual-range{display:flex}.wrapper{position:relative;width:100%;background-color:#ccc;border-radius:10px}.filters__dual-range{position:relative;width:100%;height:30px}input[type=range]{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:100%;outline:none;position:absolute;margin:auto;top:0;bottom:0;background-color:rgba(0,0,0,0);pointer-events:none}.slider-track{width:100%;height:5px;position:absolute;margin:auto;top:0;bottom:0;border-radius:5px;background-color:#f91155}input[type=range]::-webkit-slider-runnable-track{-webkit-appearance:none;height:5px}input[type=range]::-moz-range-track{-moz-appearance:none;height:5px}input[type=range]::-ms-track{appearance:none;height:5px}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;height:20px;width:20px;background-color:#005ff9;cursor:pointer;margin-top:-7px;pointer-events:auto;border-radius:50%}input[type=range]::-moz-range-thumb{-webkit-appearance:none;height:20px;width:20px;cursor:pointer;border-radius:50%;background-color:#005ff9;pointer-events:auto}input[type=range]::-ms-thumb{appearance:none;height:20px;width:20px;cursor:pointer;border-radius:50%;background-color:#005ff9;pointer-events:auto}input[type=range]:active::-webkit-slider-thumb{background-color:#005ff9;border:3px solid #f91155}.values{width:100%;position:relative;margin:auto;padding:10px 5px;border-radius:5px;text-align:center;font-weight:500;font-size:20px}.product{width:100%}.product__detail{width:100%;margin:0 auto;padding:5px 10px 10px;border-radius:8px;background-color:#fff;box-shadow:0 1px 2px 1px rgba(0,0,0,.16)}.product__title{margin-bottom:10px;width:100%;text-align:center;font-size:32px;border-bottom:1px solid #000}.product__data{max-height:60vh;width:100%;display:flex;justify-content:space-between}.product__photos{width:45%;display:flex;flex-direction:column;justify-content:space-around}.product__main-photo-container{margin-bottom:10px;padding:5px;border-radius:8px;overflow:hidden;aspect-ratio:1/1;display:flex;align-items:center;justify-content:center;box-shadow:0 1px 2px 1px rgba(0,0,0,.36)}.product__main-photo{object-fit:scale-down;height:100%}.product__slides{display:flex;justify-content:center;max-height:12vh}.product__slide{object-fit:contain;margin:0 3px;width:18%;border:2px solid rgba(0,0,0,0);border-radius:8px;aspect-ratio:1/1;cursor:pointer;box-shadow:0 1px 2px 1px rgba(0,0,0,0);transition:box-shadow .12s}.product__slide:hover,.product__slide.active{box-shadow:0 1px 2px 1px rgba(0,0,0,.36)}.product__info-list{display:flex;flex-direction:column;justify-content:space-around;width:35%;background-color:#f6f6f6;padding:10px;overflow:hidden;border-radius:8px;box-shadow:0 1px 2px 1px rgba(0,0,0,.36)}.product__info-item{display:flex;text-align:left;margin:5px 0;overflow:hidden}.product__info-name{display:inline-block;min-width:30%;font-size:20px;font-weight:500;color:#333;opacity:.8}.product__info-text{font-size:20px;font-weight:500}.product__add{width:15%;padding-right:10px;display:flex;flex-direction:column;align-items:center;justify-content:center}.product__add>*{margin:20px 0}.product__price{padding:10px;border-radius:8px;font-size:32px;font-weight:700;color:#fff;border:2px solid #f91155;animation:bgcolor infinite 1s alternate}.product__add-to-cart,.product__buy-now{transform:scale(1.4);width:75%}@keyframes bgcolor{from{background-color:#005ff9}to{background-color:#f91155}}.breadcrumbs{width:100%;margin:0 auto 20px;display:flex;justify-content:space-around;align-items:center;padding:5px 10px;border-radius:8px;background-color:#fff;box-shadow:0 1px 2px 1px rgba(0,0,0,.16)}.breadcrumbs__item{font-size:20px;font-weight:500}.breadcrumbs__separator{font-size:28px;font-weight:700;color:#005ff9}.btn{cursor:pointer;outline:none;border-color:#f91155;border-radius:8px;background-color:#005ff9;border:2px solid #f91155;color:#fff;font-weight:500;transition:background-color .2s}.btn:hover{background-color:#f91155}.cart__empty{text-align:center;font-size:40px;font-weight:700;margin-top:10%}.cart__products{width:69%}.cart__control{display:flex;align-items:center;padding:5px 10px;border-radius:8px;background-color:#fff;box-shadow:0 1px 2px 1px rgba(0,0,0,.16)}.cart__title{margin-right:auto}.cart__limit{margin-right:5%;font-weight:500}.cart__page-numbers{font-weight:500}.cart__limit-input{width:50px}.btn-left,.btn-right{cursor:pointer}.cart__items>.item{margin:10px 0}.cart__items>.item:hover .item__image{transform:scale(1)}.item{position:relative}.item__index{position:absolute;background-color:#005ff9;color:#fff;width:40px;height:27px;font-size:20px;font-weight:500;line-height:23px;border:2px solid #f91155;border-radius:0 0 8px 0;border-left:0;border-top:0;left:0;top:0;z-index:2}.item__inc,.item__dec{width:30px;height:30px;font-size:20px;line-height:1;border-radius:50%}.item__control{width:15%;display:flex;justify-content:space-between}.item__price.incart{font-size:30px;margin-right:10px;border:3px solid #f91155;border-radius:8px}.item__count{font-size:24px;font-weight:500;display:inline-block}.current-page{margin:0 10px}.cart__inner{justify-content:space-between}.cart__total{width:29%}.total{display:flex;flex-direction:column;align-items:center;border:2px solid #005ff9;border-radius:8px;height:fit-content;padding:5px;text-align:center}.total>*{margin-bottom:20px}.total__title{font-size:32px;border-bottom:1px solid #000;margin-bottom:30px;width:100%}.total__count,.total__count-text,.total__price{font-size:24px;font-weight:500}.total__price{font-size:32px;padding:0 5px;border:3px solid #f91155;border-radius:8px;background-color:#fff;position:relative;opacity:1}.total__price.old{opacity:.2;text-decoration:line-through}.total__input{text-align:center;display:inline-block}.total__checkout{padding:5px 20px;font-size:24px}.total__promo{color:#005ff9;width:75%;font-weight:500;display:flex;justify-content:space-between;align-items:center;position:relative}.total__promo::before{content:"";position:absolute;left:0;bottom:0;width:90%;height:2px;background-color:#f91155}.modal{position:fixed;width:100vw;height:100vh;left:0;top:0;display:flex;flex-direction:column;justify-content:center;background:rgba(0,0,0,.9);cursor:pointer;z-index:10}.modal__form{margin:0 auto;padding:10px;display:flex;flex-direction:column;align-items:center;max-width:700px;width:70%;z-index:11;background-color:#f6f6f6;border-radius:8px;border:2px solid #005ff9;cursor:auto}.modal__title{margin-bottom:20px;width:100%;text-align:center;border-bottom:1px solid #000}.modal__wrapper{margin:10px;text-align:center;width:70%}.modal__input{width:100%;text-align:center}.modal__card-data{width:50%;padding-top:5%;margin-bottom:20px;position:relative;background-color:#ccc;display:flex;justify-content:flex-end;flex-wrap:wrap;border-radius:8px}.modal__img{position:absolute;top:10px;left:10px;width:12%;border-radius:5px}.modal__wrapper:nth-last-child(1),.modal__wrapper:nth-last-child(2){width:32%;margin-bottom:10%}.modal__confirm{margin-bottom:10px;padding:5px 20px;font-size:20px}',""]),e.Z=a},645:function(t){t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",o=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),o&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),o&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,o,r,i){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(o)for(var c=0;c<this.length;c++){var s=this[c][0];null!=s&&(a[s]=!0)}for(var d=0;d<t.length;d++){var l=[].concat(t[d]);o&&a[l[0]]||(void 0!==i&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=i),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),r&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=r):l[4]="".concat(r)),e.push(l))}},e}},81:function(t){t.exports=function(t){return t[1]}},379:function(t){var e=[];function n(t){for(var n=-1,o=0;o<e.length;o++)if(e[o].identifier===t){n=o;break}return n}function o(t,o){for(var i={},a=[],c=0;c<t.length;c++){var s=t[c],d=o.base?s[0]+o.base:s[0],l=i[d]||0,p="".concat(d," ").concat(l);i[d]=l+1;var u=n(p),m={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==u)e[u].references++,e[u].updater(m);else{var h=r(m,o);o.byIndex=c,e.splice(c,0,{identifier:p,updater:h,references:1})}a.push(p)}return a}function r(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,r){var i=o(t=t||[],r=r||{});return function(t){t=t||[];for(var a=0;a<i.length;a++){var c=n(i[a]);e[c].references--}for(var s=o(t,r),d=0;d<i.length;d++){var l=n(i[d]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}i=s}}},569:function(t){var e={};t.exports=function(t,n){var o=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},216:function(t){t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:function(t,e,n){t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:function(t){t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,r&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(o,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:function(t){t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={id:o,exports:{}};return t[o](i,i.exports,n),i.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.nc=void 0,function(){var t=n(379),e=n.n(t),o=n(795),r=n.n(o),i=n(569),a=n.n(i),c=n(565),s=n.n(c),d=n(216),l=n.n(d),p=n(589),u=n.n(p),m=n(807),h={};h.styleTagTransform=u(),h.setAttributes=s(),h.insert=a().bind(null,"head"),h.domAPI=r(),h.insertStyleElement=l(),e()(m.Z,h),m.Z&&m.Z.locals&&m.Z.locals;class _{draw(){const t=document.querySelector(".main");t.innerHTML="page not found",console.log("error",t)}}class g{constructor(t){this.root="/",this.current="",this.navigate=(t="")=>{window.history.pushState(null,"",this.root+this.clearSlashes(t));const e=new PopStateEvent("popstate",{state:"test"});return dispatchEvent(e),this},this.controller=t,this.pageError=new _,this.listen()}listen(){const t=this.clearSlashes(decodeURI(window.location.pathname));this.controller.loadPage(t),window.onpopstate=t=>{console.log("location: "+document.location+", state: "+JSON.stringify(t.state));const e=this.clearSlashes(decodeURI(window.location.pathname));this.controller.loadPage(e)}}clearSlashes(t){return t.toString().replace(/\/$/,"").replace(/^\//,"")}getFragment(){let t;return t=this.clearSlashes(decodeURI(window.location.pathname+window.location.search)),t=t.replace(/\?(.*)$/,""),t="/"!==this.root?t.replace(this.root,""):t,this.clearSlashes(t)}}class f{createItem(t,e){const n=document.createElement("li");n.classList.add("filters__item");const o=document.createElement("input");o.id=t[0],o.type="checkbox",e.includes(t[0])&&(o.checked=!0),n.append(o);const r=document.createElement("label");r.setAttribute("for",o.id),r.textContent=o.id,n.append(r);const i=document.createElement("span"),a=document.createElement("span"),c=document.createElement("span");return a.classList.add("actual"),a.textContent=`${t[1][0]}`,c.textContent=`/ ${t[1][1]}`,i.append(a),i.append(c),n.append(i),n}}class x{draw(t,e){const n=document.createElement("button");return n.textContent=t,n.classList.add("btn",e),n}}class v{create(t,e,n){const o=document.querySelector(".filters.products__filter");if(null!==o){const r=document.createElement("div");r.classList.add("filters__block","wrapper",t.toLowerCase()),o.append(r);const i=document.createElement("h3");i.classList.add("filters__name"),i.textContent=t,r.append(i);const a=document.createElement("div");a.classList.add("filters__range","values"),r.append(a);const c=document.createElement("span");c.classList.add("filters__lower"),c.id=`range1-${t}`,c.textContent="",a.prepend(c);const s=document.createElement("span");s.classList.add("filters__lower"),s.id=`range2-${t}`,s.textContent="",a.append(s);const d=document.createElement("div");d.classList.add("filters__dual-range"),r.append(d);const l=document.createElement("div");l.classList.add("slider-track",`${t}`),d.append(l);const p=document.createElement("input");p.classList.add("filters__lower-range"),p.type="range",p.min=`${n[0]}`,p.max=`${n[1]}`,p.value=`${e[0]}`,p.id=`slider1-${t}`,d.append(p);const u=document.createElement("input");u.classList.add("filters__upper-range"),u.type="range",u.min=`${n[0]}`,u.max=`${n[1]}`,u.value=`${e[1]}`,u.id=`slider2-${t}`,d.append(u)}}control(t,e=""){const n=document.getElementById(`slider1-${t}`),o=document.getElementById(`slider2-${t}`),r=document.getElementById(`range1-${t}`),i=document.getElementById(`range2-${t}`),a=document.querySelector(`.slider-track.${t}`),c=n.max,s=n.getAttribute("max");function d(){parseInt(o.value)-parseInt(n.value)<=0&&(n.value=(parseInt(o.value)-0).toString()),Number(n.value)>=Number(s)/2?n.style.cssText="z-index: 10":n.style.cssText="",r.textContent=`${e} ${n.value}`,p()}function l(){parseInt(o.value)-parseInt(n.value)<=0&&(o.value=(parseInt(n.value)+0).toString()),Number(o.value)<Number(s)/2?o.style.cssText="z-index: 10":o.style.cssText="",i.textContent=`${e} ${o.value}`,p()}function p(){const t=+n.value/+c*100,e=+o.value/+c*100;a.style.background=`linear-gradient(to right, #dadae5 ${t}% , #3264fe ${t}% , #3264fe ${e}%, #dadae5 ${e}%)`}n.addEventListener("input",d),o.addEventListener("input",l),d(),l()}setSliderValues(t,e="",n){const o=document.getElementById(`slider1-${t}`),r=document.getElementById(`slider2-${t}`);o.value=n[0].toString(),r.value=n[1].toString(),this.control(t,e)}}class b{constructor(){this.filtersItem=new f,this.btn=new x,this.dualSliderFilter=new v}getList(t,e,n){const o={};return e.forEach((t=>{t[n]in o?o[t[n]][1]+=1:o[t[n]]=[0,1]})),t.forEach((t=>{t[n]in o&&(o[t[n]][0]+=1)})),o}getMinMaxPrice(t,e){const n=[],o=[];return t.forEach((t=>{"price"===e&&o.push(t.price),"stock"===e&&o.push(t.stock)})),o.sort(((t,e)=>t-e)),n.push(o[0]),n.push(o[o.length-1]),n}drawCategoriesFilter(t,e,n){const o=this.getList(t,e,"category"),r=document.querySelector(".filters__list.category");r&&(r.innerHTML="",Object.entries(o).forEach((t=>{r.append(this.filtersItem.createItem(t,n))})))}drawBrandsFilter(t,e,n){const o=this.getList(t,e,"brand"),r=document.querySelector(".filters__list.brand");r&&(r.innerHTML="",Object.entries(o).forEach((t=>{r.append(this.filtersItem.createItem(t,n))})))}drawPriceFilter(t,e){this.dualSliderFilter.create("Price",this.getMinMaxPrice(t,"price"),this.getMinMaxPrice(e,"price")),this.dualSliderFilter.control("Price","$ ")}setPriceSliderValues(t){this.dualSliderFilter.setSliderValues("Price","$ ",this.getMinMaxPrice(t,"price"))}drawStockFilter(t,e){this.dualSliderFilter.create("Stock",this.getMinMaxPrice(t,"stock"),this.getMinMaxPrice(e,"stock")),this.dualSliderFilter.control("Stock")}setStockSliderValues(t){this.dualSliderFilter.setSliderValues("Stock","",this.getMinMaxPrice(t,"stock"))}addFiltersStructure(){const t=document.querySelector(".products__inner"),e=document.createElement("div");e.classList.add("products__filter","filters"),null!==t&&t.prepend(e);const n=document.createElement("div");n.classList.add("filters__control"),e.append(n),n.append(this.btn.draw("Reset filters","filters__reset")),n.append(this.btn.draw("Copy Link","filters__copy")),this.addFIltersBlock("Category","category"),this.addFIltersBlock("Brand","brand")}addFIltersBlock(t,e){const n=document.querySelector(".filters.products__filter"),o=document.createElement("div");o.classList.add("filters__block",`filters__${e}`),null!==n&&n.append(o);const r=document.createElement("h3");r.classList.add("filters__name"),r.textContent=t,o.append(r);const i=document.createElement("ul");i.classList.add("filters__list",e),o.append(i)}draw(t,e){this.addFiltersStructure(),this.drawPriceFilter(t,e),this.drawStockFilter(t,e)}}class w{draw(t,e){const n=document.querySelector(".products__list");if(null!==n){const o=document.createElement("div");o.classList.add("products__sort"),n.prepend(o);const r=document.createElement("div");r.classList.add("products__sort-bar"),o.append(r);const i=document.createElement("select");i.classList.add("products__select"),i.name="select",r.append(i);const a=document.createElement("div");a.classList.add("products__find"),a.textContent=`Found: ${t.length}`,o.append(a);const c=document.createElement("div");c.classList.add("products__search-bar"),o.append(c);const s=document.createElement("input");s.classList.add("products__search"),s.type="search",s.placeholder="Search product",c.append(s);const d=document.createElement("div");d.classList.add("products__view-mode"),o.append(d);const l=document.createElement("div");l.classList.add("products__view-tile"),d.append(l);const p=document.createElement("div");p.classList.add("products__view-list"),d.append(p),"tile"===e.display?l.classList.add("active-mode"):p.classList.add("active-mode");for(let t=0;t<2;t++)l.append(document.createElement("span")),p.append(document.createElement("span"))}}drawSelect(t){const e=document.querySelector(".products__select");if(e){const n=["","price-up","price-down","rating-up","rating-down"],o=["Sorting","⇧ Price","⇩ Price","⇧ Rating","⇩ Rating"];e.innerHTML="",n.forEach(((n,r)=>{const i=document.createElement("option");""===n&&(i.hidden=!0),n===t.sort&&(i.defaultSelected=!0),i.value=n,i.textContent=o[r],e.append(i)}))}}}class y{constructor(){this.sortringBar=new w,this.filters=new b}draw(t,e,n){this.data=t;const o=document.createDocumentFragment(),r=document.querySelector("#itemTemp");if(null!=r){t.forEach((t=>{const e=r.content.cloneNode(!0);if(e instanceof DocumentFragment){const r=e.querySelector(".item");null!=r&&(r.dataset.id=t.id.toString());const i=e.querySelector(".item__name");null!=i&&(i.textContent=t.title);const a=e.querySelector(".item__price");null!=a&&(a.textContent="$ "+t.price.toString());const c=e.querySelector(".item__image");null!=c&&(c.src=t.images[0]);const s=e.querySelector(".item__category span");null!=s&&(s.textContent=t.category);const d=e.querySelector(".item__brand span");null!=d&&(d.textContent=t.brand);const l=e.querySelector(".item__discount span");null!=l&&(l.textContent=t.discountPercentage.toString()+" %");const p=e.querySelector(".item__rating span");null!=p&&(p.textContent=t.rating.toString());const u=e.querySelector(".item__stock span");null!=u&&(u.textContent=t.stock.toString());const m=e.querySelector(".item__add");m&&n.cartIds.includes(t.id)&&(m.textContent="Drop from cart"),o.append(e)}}));const e=document.querySelector(".products__items");null!=e&&(e.innerHTML="",e.append(o))}this.changeFoundItemsCount(t),this.changeDisplayMode(n.display),n.search&&this.updateSearch(n.search),this.updateActualCategories(t,e,n),this.changeSortingValue(n)}changeFoundItemsCount(t){const e=document.querySelector(".products__find");null!==e&&(e.textContent=`Found: ${t.length}`)}changeDisplayMode(t){const e="list"===t?"tile":"list",n=document.querySelector(".products__items");n&&(n.classList.contains(t)||(n.classList.add(t),n.classList.remove(e)))}updateSearch(t){const e=document.querySelector(".products__search");e instanceof HTMLInputElement&&(e.value=t)}updateActualCategories(t,e,n){const o=document.querySelector("filters__category"),r=document.querySelector("filters__brand");o&&r&&(o.innerHTML="",r.innerHTML=""),this.filters.drawBrandsFilter(t,e,n.brand),this.filters.drawCategoriesFilter(t,e,n.category),n.changePriceOrStock||(this.changeSlidersValue("price"),this.changeSlidersValue("stock"))}changeSlidersValue(t,e=this.data){e.length>0&&("price"===t?this.filters.setPriceSliderValues(e):this.filters.setStockSliderValues(e))}changeSortingValue(t){this.sortringBar.drawSelect(t)}}class S{constructor(){this.item=new y,this.filters=new b,this.sortingBar=new w}addProductsSection(t){const e=document.querySelector("main"),n=document.createElement("section");n.classList.add("products");const o=document.createElement("div");o.classList.add("container"),n.append(o);const r=document.createElement("div");r.classList.add("products__inner"),o.append(r);const i=document.createElement("div");i.classList.add("products__list"),r.append(i);const a=document.createElement("ul");a.classList.add("products__items",t),i.append(a),e.innerHTML="",e.append(n)}draw(t,e,n){this.addProductsSection(n.display),this.sortingBar.draw(e,n),this.filters.draw(t,e),this.item.draw(t,e,n),dispatchEvent(new Event("drawMainPage"))}}var L;class E{constructor(t="https://dummyjson.com/products?limit=40"){this.path=t}api(){return t=this,e=void 0,o=function*(){const t=yield fetch(this.path);return yield t.json()},new((n=void 0)||(n=Promise))((function(r,i){function a(t){try{s(o.next(t))}catch(t){i(t)}}function c(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}s((o=o.apply(t,e||[])).next())}));var t,e,n,o}}!function(t){t.priceUp="price-up",t.priceDown="price-down",t.ratingUp="rating-up",t.ratingDown="rating-down"}(L||(L={}));class C{constructor(){this.apiLoader=new E,this.shoppingCart=this.getShoppingCart()||[]}loadData(){return t=this,e=void 0,o=function*(){const t=yield this.apiLoader.api();this.productsAll=t.products},new((n=void 0)||(n=Promise))((function(r,i){function a(t){try{s(o.next(t))}catch(t){i(t)}}function c(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}s((o=o.apply(t,e||[])).next())}));var t,e,n,o}filterByRange(t,e,n,o){return t.filter((t=>t[e]>=n&&t[e]<=o))}filterByField(t,e,n){let o=[];return n.forEach((n=>{o=[...o,...t.filter((t=>t[e]===n))]})),o}filterBySearch(t,e){return e=e.toLocaleLowerCase().trim(),t.filter((t=>t.title.toLocaleLowerCase().includes(e)||t.brand.toLocaleLowerCase().includes(e)||t.category.toLocaleLowerCase().includes(e)||t.description.toLocaleLowerCase().includes(e)))}sortItems(t,e){switch(t){case L.priceDown:return e.sort(((t,e)=>e.price-t.price));case L.priceUp:return e.sort(((t,e)=>t.price-e.price));case L.ratingDown:return e.sort(((t,e)=>e.rating-t.rating));case L.ratingUp:return e.sort(((t,e)=>t.rating-e.rating));default:return e}}getShoppingCart(){const t=localStorage.getItem("shopping");return console.log(t),t?JSON.parse(t):[]}saveShoppingCart(){localStorage.setItem("shopping",JSON.stringify(this.shoppingCart)),dispatchEvent(new Event("storage"))}changeItemToCart(t,e){const n=this.productsAll.find((e=>e.id===Number(t))),o=this.shoppingCart.findIndex((e=>e.id===Number(t))),r=this.shoppingCart.find((e=>e.id===Number(t)));n&&("minus"===e&&o>-1&&r&&(r.count--,0===r.count?this.shoppingCart.splice(o,1):this.shoppingCart[o]=r),"plus"===e&&(o>-1&&r?n.stock>r.count&&(r.count++,this.shoppingCart[o]=r):this.shoppingCart.push({id:n.id,count:1,price:n.price}))),this.saveShoppingCart()}findItemsFromCart(t){return t.map((t=>{const e=this.productsAll.find((e=>e.id===t.id));if(e)return Object.assign(Object.assign({},e),{count:t.count})}))}}class k{constructor(t){this.controller=t,this.router=t.router,this.model=t.model,this.view=t.view}listen(){window.addEventListener("drawMainPage",(()=>{const t=document.querySelector(".products__items"),e=document.querySelector(".products__search"),n=document.querySelector(".products__select"),o=document.querySelector(".filters__list.category"),r=document.querySelector(".filters__list.brand"),i=document.querySelector(".filters__reset"),a=document.querySelector(".filters__block.wrapper.price"),c=document.querySelector(".filters__block.wrapper.stock"),s=document.querySelector(".products__view-mode"),d=document.querySelector(".filters__copy");t&&t.addEventListener("click",(t=>{if(t.target instanceof HTMLElement){const e=t.target.closest(".item"),n=t.target.closest(".item__add");if(e){const o=e.getAttribute("data-id");if(n&&o){const t="Drop from cart"===n.textContent?"minus":"plus";this.model.changeItemToCart(o,t),n.textContent="Drop from cart"===n.textContent?"Add to cart":"Drop from cart"}else this.controller.appRouter(t,`product/${o}`)}}})),e&&e.addEventListener("input",(t=>{const e=t.target;e.value?this.model.filter.set("search",e.value):this.model.filter.delete("search"),this.controller.appRouter(t,"?"+this.model.filter.toString())})),n&&n.addEventListener("change",(t=>{const e=t.target;this.model.filter.set("sort",e.value),this.controller.appRouter(t,"?"+this.model.filter.toString())})),o&&o.addEventListener("change",(t=>{this.checkboxInput(t,o,"category")})),r&&r.addEventListener("change",(t=>{this.checkboxInput(t,r,"brand")})),i&&i.addEventListener("click",(t=>{var e;const n=document.querySelector(".products__items");null===(e=null==n?void 0:n.parentElement)||void 0===e||e.removeChild(n),this.controller.appRouter(t,"/")})),a&&a.addEventListener("input",(t=>{const e=parseInt(a.querySelector("#range1-Price").innerHTML.slice(1)),n=parseInt(a.querySelector("#range2-Price").innerHTML.slice(1));this.model.filter.set("price",`${e}%${n}`),this.controller.changeSliders(),this.controller.appRouter(t,"?"+this.model.filter.toString()),this.controller.view.item.changeSlidersValue("stock")})),c&&c.addEventListener("input",(t=>{const e=parseInt(c.querySelector("#range1-Stock").innerHTML.slice(1)),n=parseInt(c.querySelector("#range2-Stock").innerHTML.slice(1));this.model.filter.set("stock",`${e}%${n}`),this.controller.changeSliders(),this.controller.appRouter(t,"?"+this.model.filter.toString()),this.controller.view.item.changeSlidersValue("price")})),s&&s.addEventListener("click",(t=>{const e=s.querySelector(".products__view-tile"),n=s.querySelector(".products__view-list");if(t.target instanceof HTMLElement){const o=t.target.closest(".products__view-tile"),r=t.target.closest(".products__view-list");o&&n?this.toggleDisplayClasses(o,n,"tile",t):r&&e&&this.toggleDisplayClasses(r,e,"list",t)}})),d&&d.addEventListener("click",(()=>{const t=window.location.href,e=d.textContent;console.log("copy",t),navigator.clipboard.writeText(t).then((()=>{d.textContent="Copied!",setTimeout((()=>{d.textContent=e}),500)}))}))}))}checkboxInput(t,e,n){const o=e.querySelectorAll(".filters__item input:checked");this.model.filter.delete(n),[...o].forEach((t=>this.model.filter.append(n,t.id))),this.controller.appRouter(t,"?"+this.model.filter.toString())}toggleDisplayClasses(t,e,n,o){t.classList.contains("active-mode")||(t.classList.add("active-mode"),e.classList.remove("active-mode"),this.model.filter.set("display",n),this.controller.appRouter(o,"?"+this.model.filter.toString()))}}class P{draw(t){const e=document.querySelector(".product__inner");if(null!==e){const n=document.createElement("div");n.classList.add("breadcrumbs"),e.append(n);const o=["store",t.category,t.brand,t.title];o.forEach(((t,e)=>{const r=document.createElement("span");if(r.classList.add("breadcrumbs__item"),r.textContent=t.toUpperCase(),n.append(r),e!==o.length-1){const t=document.createElement("span");t.classList.add("breadcrumbs__separator"),t.textContent=">>",n.append(t)}}))}}}class q{constructor(){this.btn=new x}draw(t,e){const n=document.querySelector(".product__inner");if(null!==n){const o=document.createElement("div");o.classList.add("product__detail"),n.append(o);const r=document.createElement("h2");r.classList.add("product__title"),r.textContent=t.title,o.append(r);const i=document.createElement("div");i.classList.add("product__data"),o.append(i);const a=document.createElement("div");a.classList.add("product__photos"),i.append(a);const c=document.createElement("div");c.classList.add("product__main-photo-container"),a.append(c);const s=document.createElement("img");s.classList.add("product__main-photo"),s.src=t.images[0]?t.images[0]:"",s.alt="Product photo",c.append(s);const d=document.createElement("div");d.classList.add("product__slides"),a.append(d),t.images.forEach(((t,e)=>{const n=document.createElement("img");n.classList.add("product__slide"),0===e&&n.classList.add("active"),n.src=t,n.alt="Product photo",d.append(n)}));const l=document.createElement("ul");l.classList.add("product__info-list"),i.append(l);const p=["Description","Category","Brand","Rating","Discount","Stock"],u=[t.description,t.category,t.brand,t.rating,t.discountPercentage,t.stock];p.forEach(((t,e)=>{const n=document.createElement("li");n.classList.add("product__info-item"),l.append(n);const o=document.createElement("h3");o.classList.add("product__info-name"),o.textContent=t+":",n.append(o);const r=document.createElement("p");r.classList.add("product__info-text"),r.textContent=u[e].toString(),n.append(r)}));const m=document.createElement("div");m.classList.add("product__add"),i.append(m);const h=document.createElement("p");h.classList.add("product__price"),h.textContent="$ "+t.price.toString(),m.append(h);const _=e.includes(t.id)?"DROP FROM CART":"ADD TO CARD",g=this.btn.draw(_,"product__add-to-cart");m.append(g);const f=this.btn.draw("BUY NOW","product__buy-now");m.append(f),d.addEventListener("click",this.changeMainPhoto)}}changeMainPhoto(t){t.preventDefault;const e=document.querySelector(".product__main-photo"),n=document.querySelectorAll(".product__slide");t.target instanceof HTMLImageElement&&null!==t.target&&e instanceof HTMLImageElement&&null!==e&&(n.forEach((t=>{t instanceof HTMLImageElement&&null!==t&&t.classList.remove("active")})),t.target.classList.add("active"),e.src=t.target.src)}}class I{constructor(){this.breadCrumbs=new P,this.productDetail=new q}addSection(){const t=document.querySelector(".main");t.innerHTML="";const e=document.createElement("section");e.classList.add("product"),t.append(e);const n=document.createElement("div");n.classList.add("container"),e.append(n);const o=document.createElement("div");o.classList.add("product__inner"),n.append(o)}draw(t,e){this.addSection(),this.breadCrumbs.draw(t),this.productDetail.draw(t,e),dispatchEvent(new Event("drawProductPage"))}}class T{draw(t,e){const n=e.querySelector(".item");if(n){const e=document.createElement("div");e.classList.add("item__control"),n.append(e);const o=document.createElement("button");o.classList.add("item__dec","btn"),o.dataset.id=t.id.toString(),o.textContent="–",e.append(o);const r=document.createElement("span");r.classList.add("item__count"),r.textContent=t.count.toString(),e.append(r);const i=document.createElement("button");i.classList.add("item__inc","btn"),i.dataset.id=t.id.toString(),i.textContent="+",e.append(i)}}}class M{constructor(){this.cartItemControl=new T}draw(t,e){const n=document.createDocumentFragment(),o=document.querySelector("#itemTemp");if(null!=o){const r=o.content.cloneNode(!0);if(r instanceof DocumentFragment){const o=r.querySelector(".item");if(null!=o){o.dataset.id=t.id.toString();const n=document.createElement("div");n.classList.add("item__index"),n.textContent=e.toString(),o.prepend(n)}const i=r.querySelector(".item__name");null!=i&&(i.textContent=t.title);const a=r.querySelector(".item__price");null!=a&&(a.classList.add("incart"),a.textContent="$ "+(t.price*t.count).toString());const c=r.querySelector(".item__image");null!=c&&(c.src=t.images[0]);const s=r.querySelector(".item__category span");null!=s&&(s.textContent=t.category);const d=r.querySelector(".item__brand span");null!=d&&(d.textContent=t.brand);const l=r.querySelector(".item__discount span");null!=l&&(l.textContent=t.discountPercentage.toString()+" %");const p=r.querySelector(".item__rating span");null!=p&&(p.textContent=t.rating.toString());const u=r.querySelector(".item__stock span");null!=u&&(u.textContent=t.stock.toString());const m=r.querySelector(".item__add");null!=m&&m.remove(),this.cartItemControl.draw(t,r),n.append(r)}const i=document.querySelector(".cart__items");null!=i&&i.append(n)}}}class ${create(t){const e=document.querySelector(".cart__inner");if(e){const n=document.createElement("div");n.classList.add("cart__total","total"),e.append(n);const o=document.createElement("h2");o.classList.add("total__title"),o.textContent="Total",n.append(o);const r=document.createElement("div");r.classList.add("total__price"),n.append(r);const i=document.createElement("div");i.classList.add("total__count-text"),i.textContent="Products: ",n.append(i);const a=document.createElement("span");a.classList.add("total__count"),a.textContent=`${t.length}`,i.append(a);const c=document.createElement("input");c.classList.add("total__input"),c.type="text",c.placeholder="Enter promo code",n.append(c);const s=document.createElement("p");s.classList.add("total__text-promo"),s.textContent="Promo for test: 'RSS', 'EPM'",n.append(s);const d=document.createElement("button");d.classList.add("total__checkout","btn"),d.textContent="CHECKOUT",n.append(d)}}checkPromo(){const t=document.querySelector(".total__input");t&&t instanceof HTMLInputElement&&t.addEventListener("input",(()=>{var e;"RSS"===t.value&&!t.classList.contains("RSS")||"EPM"===t.value&&!t.classList.contains("EPM")?this.createPromo(t.value):(null===(e=t.nextElementSibling)||void 0===e?void 0:e.classList.contains("total__promo"))&&t.nextElementSibling.remove()}))}createPromo(t){const e=document.querySelector(".total__input"),n=document.createElement("div");n.classList.add("total__promo"),n.textContent=`"${t}" - 10% discount`,e.after(n);const o=document.createElement("button");return o.classList.add("total__add-promo","apply","btn"),o.textContent="APPLY",n.append(o),{currentPromo:n,value:t}}savePromoToLocalStorage(t,e){const n=this.loadPromoLocalStorage();if("add"===e)n.push(t);else{const e=n.findIndex((({name:e})=>e===t.name));n.splice(e,1)}localStorage.setItem("promo",JSON.stringify(n))}loadPromoLocalStorage(){const t=localStorage.getItem("promo");return t?JSON.parse(t):[]}addRemovePromo(){const t=document.querySelector(".cart__total"),e=document.querySelector(".total__input");t&&e&&t.addEventListener("click",(t=>{var n,o,r;if(t.target&&t.target instanceof HTMLButtonElement)if(t.target.classList.contains("apply")){const n=t.target.parentElement;n&&(this.addActivePromo({currentPromo:n,value:e.value}),this.savePromoToLocalStorage({name:e.value},"add"),e.value="")}else if(t.target.classList.contains("drop")){const i=null===(o=null===(n=t.target.previousSibling)||void 0===n?void 0:n.textContent)||void 0===o?void 0:o.slice(1,4);if(i&&e.classList.remove(i),t.target.parentElement){const e=t.target.parentElement.getAttribute("type");null===(r=t.target.parentElement)||void 0===r||r.remove(),e&&this.savePromoToLocalStorage({name:e},"remove"),this.removePrice()}}}))}addActivePromo(t){var e,n;const o=document.querySelector(".total__input"),r=null===(e=t.currentPromo)||void 0===e?void 0:e.cloneNode(!0);r&&r.lastChild&&r.lastChild instanceof HTMLButtonElement&&(r.lastChild.classList.remove("apply"),r.lastChild.classList.add("drop"),r.lastChild.textContent="DROP",r.setAttribute("type",t.value),null===(n=t.currentPromo)||void 0===n||n.remove(),o.classList.add(t.value),o.before(r),this.addNewPrice())}addNewPrice(){const t=document.getElementsByClassName("total__price");if(t){const e=t[t.length-1],n=e.cloneNode(!0);if(n.textContent){const t=n.textContent.slice(n.textContent.indexOf(" "));e.classList.add("old"),n.textContent=`$ ${(.9*+t).toFixed(2)}`,e.after(n)}}}removePrice(){const t=document.getElementsByClassName("total__price");t&&(t[t.length-2].classList.remove("old"),t[t.length-1].remove())}draw(t){this.create(t),this.checkPromo(),this.addRemovePromo()}}class R{constructor(){this.cartItem=new M,this.cartTotal=new $}addStructure(t,e,n){const o=document.querySelector(".cart__inner");if(o)if(o.innerHTML="",0===t.length){const t=document.createElement("p");t.classList.add("cart__empty"),t.textContent="Cart is Empty",o.append(t)}else{const r=document.createElement("div");r.classList.add("cart__products"),o.append(r);const i=document.createElement("div");i.classList.add("cart__control"),r.append(i);const a=document.createElement("h2");a.classList.add("cart__title"),a.textContent="Products in Cart",i.append(a);const c=document.createElement("div");c.classList.add("cart__limit"),c.textContent="LIMIT: ",i.append(c);const s=document.createElement("input");s.classList.add("cart__limit-input"),s.type="number",s.min="1",s.max=t.length.toString(),s.value=e?e.toString():t.length.toString(),c.append(s);const d=document.createElement("div");d.classList.add("cart__page-numbers"),d.textContent="PAGE: ",i.append(d);const l=document.createElement("button");l.classList.add("btn-left"),l.textContent="<",d.append(l);const p=document.createElement("span");p.classList.add("current-page");const u=n&&t.length/+s.value>n?n:Math.floor(t.length/+s.value);p.textContent=u?u.toString():"1",d.append(p);const m=document.createElement("button");m.classList.add("btn-right"),m.textContent=">",d.append(m);const h=document.createElement("ul");h.classList.add("cart__items","list"),r.append(h)}}drawItemsList(t){console.log("1");const e=document.querySelector(".cart__limit-input"),n=document.querySelector(".current-page"),o=document.querySelector(".cart__items");o&&(o.innerHTML="");const r=+e.value,i=n.textContent?+n.textContent:1,a=r*i-1,c=[];for(let t=(i-1)*r;t<=a;t++)c.push(t);c.forEach((e=>{t[e]&&this.cartItem.draw(t[e],e+1)})),this.updateTotalValues(t)}changePageLimit(t){const e=document.querySelector(".cart__limit-input"),n=document.querySelector(".current-page");n&&e.addEventListener("input",(()=>{if(0!=+e.value&&+e.value<=+e.max){const o=n.textContent?+n.textContent:111,r=Math.ceil(t.length/+e.value);r<o&&(n.textContent=`${r}`),this.drawItemsList(t)}}))}changePage(t){console.log("changePage");const e=document.querySelector(".cart__limit-input");if(e&&e instanceof HTMLInputElement){const n=document.querySelector(".btn-left"),o=document.querySelector(".btn-right"),r=document.querySelector(".current-page");n&&o&&r&&(n.addEventListener("click",(()=>{let t=r.textContent?+r.textContent:1;t>1&&(t--,r.textContent=`${t}`)})),o.addEventListener("click",(()=>{let n=r.textContent?+r.textContent:1;n<t.length/+e.value&&(n++,r.textContent=`${n}`)})))}}updateTotalValues(t){const e=document.querySelector(".total__price"),n=document.querySelector(".total__count");e&&(e.textContent=`$ ${t.reduce(((t,e)=>t+e.price*e.count),0)}.00`),n&&(n.textContent=`${t.reduce(((t,e)=>t+e.count),0)}`);const o=document.getElementsByClassName("total__price");if(o){const e=[1,.9,.8];for(let n=1;n<o.length;n++)o[n].textContent&&(o[n].textContent=`$ ${(t.reduce(((t,e)=>t+e.price*e.count),0)*e[n]).toFixed(2)}`)}}draw(t,e,n){this.addStructure(t,e,n),t.length>0&&(this.drawItemsList(t),this.changePageLimit(t),this.changePage(t),this.cartTotal.draw(t),this.updateTotalValues(t)),dispatchEvent(new Event("drawCartPage"))}}class F{create(){const t=document.createElement("input");console.log(t)}}class A{create(t,e){const n=document.createDocumentFragment(),o=document.createElement("div");o.classList.add("modal__wrapper"),n.append(o);const r=document.createElement("input");return r.classList.add("modal__input",e),r.type=t,r.placeholder=e,o.append(r),n}}class D{constructor(){this.placeholders=["name","phone","addres","e-mail"],this.placeholdersCard=["number","date","cvv"],this.srcImg=[["","https://i.guim.co.uk/img/media/b73cc57cb1d46ae742efd06b6c58805e8600d482/16_0_2443_1466/master/2443.jpg?width=700&quality=85&auto=format&fit=max&s=fb1dca6cdd4589cd9ef2fc941935de71"],["3","https://www.aexp-static.com/cdaas/one/statics/axp-static-assets/1.8.0/package/dist/img/logos/dls-logo-stack.svg"],["4","https://cdn.visa.com/v2/assets/images/logos/visa/blue/logo.png"],["5","https://www.mastercard.hu/content/dam/public/mastercardcom/eu/hu/images/mc-logo-52.svg"]],this.confirmInput=new F,this.input=new A,this.btn=new x}addStructure(){const t=document.querySelector(".main");if(t){const e=document.createElement("div");e.classList.add("modal"),t.prepend(e);const n=document.createElement("form");n.classList.add("modal__form"),e.append(n);const o=document.createElement("h2");o.classList.add("modal__title","modal__title--personal"),o.textContent="Personal details",n.append(o);const r=document.createElement("h2");r.classList.add("modal__title","modal__title--card"),r.textContent="Credit card details",n.append(r);const i=document.createElement("div");i.classList.add("modal__card-data"),n.append(i);const a=document.createElement("img");a.classList.add("modal__img"),a.alt="Credit card logo",a.src="https://i.guim.co.uk/img/media/b73cc57cb1d46ae742efd06b6c58805e8600d482/16_0_2443_1466/master/2443.jpg?width=700&quality=85&auto=format&fit=max&s=fb1dca6cdd4589cd9ef2fc941935de71",i.append(a),n.append(this.btn.draw("CONFIRM","modal__confirm"))}}createPersonalInputs(){this.placeholders.forEach(((t,e)=>{const n=this.input.create(e!==this.placeholders.length-1?"text":"email",t),o=document.querySelector(".modal__title--personal");o&&o.after(n)}))}createCardInputs(){const t=document.querySelector(".modal__card-data");t&&this.placeholdersCard.forEach((e=>{const n=this.input.create("text",e);t.append(n)}))}closeModal(){const t=document.querySelector(".modal"),e=document.querySelector(".main");t&&e&&t.addEventListener("click",(t=>{t.target&&t.target instanceof HTMLElement&&t.target.classList.contains("modal")&&t.target.remove()}))}draw(){this.addStructure(),this.createPersonalInputs(),this.createCardInputs(),this.closeModal()}}class z{constructor(){this.cardPagination=new R,this.cartTotal=new $,this.modal=new D}addSection(){const t=document.querySelector(".main");t.innerHTML="";const e=document.createElement("section");e.classList.add("cart"),t.append(e);const n=document.createElement("div");n.classList.add("container"),e.append(n);const o=document.createElement("div");o.classList.add("cart__inner"),n.append(o)}openModal(){const t=document.querySelector(".total__checkout");t&&t.addEventListener("click",(()=>{this.modal.draw()}))}draw(t,e,n){this.addSection(),this.cardPagination.draw(t,e,n),this.openModal()}}class j{constructor(t){this.controller=t,this.model=t.model,this.cartPage=t.cartPage}listen(){window.addEventListener("drawCartPage",(()=>{this.updatePromos();const t=document.querySelector(".cart__items"),e=document.querySelector(".cart__limit-input"),n=document.querySelector(".cart__page-numbers");t&&t.addEventListener("click",(t=>{if(t.target instanceof HTMLElement){const e=t.target.closest(".item");if(e){const n=e.getAttribute("data-id"),o=t.target.closest(".item__dec"),r=t.target.closest(".item__inc");n&&(r||o)&&(r&&this.model.changeItemToCart(n,"plus"),o&&this.model.changeItemToCart(n,"minus"),this.controller.appRouter(t,"cart/?"+this.model.filter.toString()))}}})),e&&e.addEventListener("change",(t=>{const e=t.target;console.log(e.value),this.model.filter.set("limit",e.value),this.controller.appRouter(t,"cart/?"+this.model.filter.toString())})),n&&n.addEventListener("click",(t=>{const e=t.target.closest("button"),n=document.querySelector(".current-page");console.log(e,n),e&&n&&(this.model.filter.set("page",n.textContent||"1"),this.controller.appRouter(t,"cart/?"+this.model.filter.toString()))}))}))}updatePromos(){this.promos=this.cartPage.cartTotal.loadPromoLocalStorage(),this.promos.length>0&&this.promos.forEach((t=>{if(t.name){const e=this.cartPage.cartTotal.createPromo(t.name);this.cartPage.cartTotal.addActivePromo(e)}}))}}class H{constructor(t){this.controller=t,this.model=t.model,this.cartPage=t.cartPage}listen(){window.addEventListener("drawProductPage",(()=>{const t=document.querySelector(".product__add-to-cart"),e=document.querySelector(".product__buy-now"),n=this.controller.router.clearSlashes(decodeURI(window.location.pathname)).split("/")[1];t&&t.addEventListener("click",(()=>{const e="ADD TO CARD"===t.textContent?"plus":"minus";t.textContent="plus"===e?"DROP FROM CART":"ADD TO CARD",this.model.changeItemToCart(n,e)})),e&&e.addEventListener("click",(()=>{console.log("do something")}))}))}}class N{constructor(){this.view=new S,this.productPage=new I,this.cartPage=new z,this.model=new C,this.router=new g(this),this.pageError=new _,this.mainPageController=new k(this),this.cartPageController=new j(this),this.productPageController=new H(this),this.cart=[]}start(){this.addUserEvents(),this.tourchSliders=!0}appRouter(t,e){t.target instanceof HTMLElement&&this.router.navigate(e)}loadPage(t=""){return e=this,n=void 0,r=function*(){this.updateCart(),this.model.filter=new URLSearchParams(window.location.search),this.model.productsAll||(yield this.model.loadData());const e=t.split("/"),n=this.model.productsAll.find((t=>t.id===Number(e[1]))),o=this.updateFilters(this.model.filter),r=this.filterAndSortItems(o,this.model.productsAll);if(""===t)document.querySelector(".products__items")?this.view.item.draw(r,this.model.productsAll,o):this.view.draw(r,this.model.productsAll,o);else if(2===e.length&&"product"===e[0]&&n)this.productPage.draw(n,o.cartIds);else if("cart"===t){const t=document.querySelector(".cart__inner"),e=null==t?void 0:t.querySelectorAll("li"),n=this.model.findItemsFromCart(this.model.shoppingCart);t&&e&&e.length>1?this.cartPage.cardPagination.drawItemsList(n):this.cartPage.draw(n,o.cartLimit,o.cartPage)}else this.pageError.draw();this.tourchSliders=!1},new((o=void 0)||(o=Promise))((function(t,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(e){var n;e.done?t(e.value):(n=e.value,n instanceof o?n:new o((function(t){t(n)}))).then(a,c)}s((r=r.apply(e,n||[])).next())}));var e,n,o,r}addUserEvents(){this.mainPageController.listen(),this.cartPageController.listen(),this.productPageController.listen();const t=document.querySelector(".header__title"),e=document.querySelector(".header__cart");t.addEventListener("click",(t=>{var e;if(t.target instanceof HTMLElement){const n=document.querySelector(".products__items");null===(e=null==n?void 0:n.parentElement)||void 0===e||e.removeChild(n),this.appRouter(t,"/")}})),e.addEventListener("click",(t=>{t.target instanceof HTMLElement&&this.appRouter(t,"cart")})),window.addEventListener("storage",this.updateCart)}updateCart(){const t=document.querySelector(".header__total--label"),e=document.querySelector(".header__cart--label"),n=localStorage.getItem("shopping");if(n){this.cart=JSON.parse(n);const o=this.cart.reduce(((t,e)=>t+e.price*e.count),0),r=this.cart.reduce(((t,e)=>t+e.count),0);t.textContent=`$ ${o}.00`,e.textContent=`${r}`}}filterAndSortItems(t,e){if(e=e.slice(),t.price){const[n,o]=t.price;e=this.model.filterByRange(e,"price",n,o)}if(t.stock){const[n,o]=t.stock;e=this.model.filterByRange(e,"stock",n,o)}return t.brand&&t.brand.length>0&&(e=this.model.filterByField(e,"brand",t.brand)),t.category&&t.category.length>0&&(e=this.model.filterByField(e,"category",t.category)),t.search&&(e=this.model.filterBySearch(e,t.search)),t.sort&&(e=this.model.sortItems(t.sort,e)),e}updateFilters(t){const e=this.cart.map((t=>t.id)),n={display:"tile",sort:"",category:[],brand:[],changePriceOrStock:this.tourchSliders,cartIds:e},o=t.get("price");o&&(n.price=o.split("%").map(Number));const r=t.get("stock");r&&(n.stock=r.split("%").map(Number));const i=t.getAll("search").join(",");i&&(n.search=i);const a=t.getAll("category");a.length>0&&(n.category=a);const c=t.getAll("brand");c.length>0&&(n.brand=c);const s=t.get("display");n.display="list"!==s?"tile":"list";const d=t.get("sort");n.sort=d;const l=t.get("limit");l&&(n.cartLimit=Number(l));const p=t.get("page");return p&&(n.cartPage=Number(p)),n}changeSliders(){this.tourchSliders=!0}}(new class{constructor(){this.controller=new N}start(){return t=this,e=void 0,o=function*(){this.controller.start()},new((n=void 0)||(n=Promise))((function(r,i){function a(t){try{s(o.next(t))}catch(t){i(t)}}function c(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}s((o=o.apply(t,e||[])).next())}));var t,e,n,o}}).start()}()}();